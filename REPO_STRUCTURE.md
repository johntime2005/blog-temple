# ğŸ“‚ ä»“åº“æ–‡ä»¶åˆ†ç±»è¯´æ˜

> æœ€åæ›´æ–°ï¼š2025-12-05

æœ¬æ–‡æ¡£è¯´æ˜ä¸»ä»“åº“ï¼ˆå…¬å¼€ï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆç§æœ‰ï¼‰çš„æ–‡ä»¶åˆ†ç±»ã€‚

---

## ğŸŒ å…¬å…±ä»“åº“ï¼ˆä¸»ä»“åº“ï¼‰

**ä»“åº“åœ°å€ï¼š** `https://github.com/johntime2005/blog`
**å¯è§æ€§ï¼š** å…¬å¼€ï¼ˆPublicï¼‰
**ç”¨é€”ï¼š** åšå®¢æ¡†æ¶ã€å…¬å¼€æ–‡ç« ã€é…ç½®æ–‡ä»¶ã€ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

### ğŸ“ ç›®å½•ç»“æ„

```
blog/ (å…¬å¼€ä»“åº“)
â”œâ”€â”€ .github/                    # GitHub Actions é…ç½®
â”œâ”€â”€ functions/                  # Cloudflare Functions
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ admin/              # ç®¡ç†å‘˜ API
â”‚       â””â”€â”€ auth/               # ç”¨æˆ·è®¤è¯ API âœ¨ æ–°å¢
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ scripts/                    # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ process-diary.js        # æ—¥è®°å¤„ç†è„šæœ¬ âœ¨ æ–°å¢
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ auth/               # è®¤è¯ç»„ä»¶ âœ¨ æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ AccessGuard.svelte      # è®¿é—®æ§åˆ¶å®ˆå«
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.svelte        # ç™»å½•è¡¨å•
â”‚   â”‚   â”‚   â””â”€â”€ UserManagement.svelte   # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ widget/             # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ content/
â”‚   â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”‚   â”œâ”€â”€ tutorials/      # æ•™ç¨‹æ–‡ç« ï¼ˆå…¬å¼€ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ wordpress-import/ # WordPress å¯¼å…¥æ–‡ç« ï¼ˆå…¬å¼€ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ diary/          # ğŸ”’ Git å­æ¨¡å— â†’ ç§æœ‰ä»“åº“
â”‚   â”‚   â””â”€â”€ spec/               # ç‰¹æ®Šé¡µé¢
â”‚   â”œâ”€â”€ layouts/                # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ encryption.astro    # åŠ å¯†ç®¡ç†åå°
â”‚   â”‚   â”‚   â””â”€â”€ users.astro         # ç”¨æˆ·ç®¡ç†åå° âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ login.astro              # ç™»å½•é¡µé¢ âœ¨ æ–°å¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitmodules                 # å­æ¨¡å—é…ç½® âœ¨ æ–°å¢
â”œâ”€â”€ CLAUDE.md                   # AI å¼€å‘æŒ‡å—
â”œâ”€â”€ DEPLOYMENT.md               # éƒ¨ç½²æ–‡æ¡£ï¼ˆå·²æ›´æ–°ï¼‰
â”œâ”€â”€ astro.config.mjs
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### ğŸ“ åŒ…å«çš„å†…å®¹

#### 1. **åšå®¢æ¡†æ¶ä»£ç **
- Astro é…ç½®å’Œé¡µé¢
- ç»„ä»¶åº“ï¼ˆSvelte/Astroï¼‰
- å¸ƒå±€æ¨¡æ¿
- æ ·å¼æ–‡ä»¶

#### 2. **å…¬å¼€æ–‡ç« **
- `src/content/posts/tutorials/` - æ•™ç¨‹æ–‡ç« 
- `src/content/posts/wordpress-import/` - WordPress å¯¼å…¥çš„æ–‡ç« 
- `src/content/posts/*.md` - å…¶ä»–å…¬å¼€æ–‡ç« 

#### 3. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** âœ¨ æ–°å¢
- **API ç«¯ç‚¹ï¼š**
  - `POST /api/auth/register` - æ³¨å†Œï¼ˆéœ€ç®¡ç†å‘˜tokenï¼‰
  - `POST /api/auth/login` - ç™»å½•
  - `POST /api/auth/logout` - ç™»å‡º
  - `POST /api/auth/verify` - éªŒè¯session
  - `GET /api/auth/current-user` - è·å–å½“å‰ç”¨æˆ·

- **å‰ç«¯ç»„ä»¶ï¼š**
  - `LoginForm.svelte` - ç™»å½•è¡¨å•
  - `AccessGuard.svelte` - è®¿é—®æ§åˆ¶å®ˆå«
  - `UserManagement.svelte` - ç”¨æˆ·ç®¡ç†

- **é¡µé¢ï¼š**
  - `/login` - ç™»å½•é¡µé¢
  - `/admin/users` - ç”¨æˆ·ç®¡ç†åå°

#### 4. **é…ç½®ä¸æ–‡æ¡£**
- ç«™ç‚¹é…ç½®ï¼ˆ`src/config/`ï¼‰
- éƒ¨ç½²æ–‡æ¡£ï¼ˆ`DEPLOYMENT.md`ï¼‰
- AI å¼€å‘æŒ‡å—ï¼ˆ`CLAUDE.md`ï¼‰

### ğŸ”— å­æ¨¡å—å¼•ç”¨

ä¸»ä»“åº“é€šè¿‡ Git å­æ¨¡å—å¼•ç”¨ç§æœ‰æ—¥è®°ä»“åº“ï¼š

```bash
# .gitmodules å†…å®¹
[submodule "src/content/posts/diary"]
    path = src/content/posts/diary
    url = git@github.com:johntime2005/blog-diary-private.git
```

---

## ğŸ”’ ç§æœ‰ä»“åº“ï¼ˆæ—¥è®°ï¼‰

**ä»“åº“åœ°å€ï¼š** `https://github.com/johntime2005/blog-diary-private`
**å¯è§æ€§ï¼š** ç§æœ‰ï¼ˆPrivateï¼‰
**ç”¨é€”ï¼š** ä¸ªäººæ—¥è®°å†…å®¹ï¼ˆéœ€ç™»å½•è®¿é—®ï¼‰

### ğŸ“ ç›®å½•ç»“æ„

```
blog-diary-private/ (ç§æœ‰ä»“åº“)
â”œâ”€â”€ 2023-12-14-æ¢¦è®°.md
â”œâ”€â”€ 2023-12-21-æ—¥è®°.md
â”œâ”€â”€ 2024-01-03-æ—¥è®°.md
â”œâ”€â”€ 2024-11-23-éšç¬”.md
â”œâ”€â”€ 2025-09-03-æ€å½•.md
â””â”€â”€ ... (å…± 75 ç¯‡æ—¥è®°)
```

### ğŸ“ åŒ…å«çš„å†…å®¹

#### 1. **ä¸ªäººæ—¥è®°**ï¼ˆ75 ç¯‡ï¼‰
- **æ—¥è®°** - æ—¥å¸¸è®°å½•
- **éšç¬”** - éšæƒ³æ„Ÿæ‚Ÿ
- **æ¢¦è®°** - æ¢¦å¢ƒè®°å½•
- **æ€å½•** - æ€è€ƒæ€»ç»“
- **éšè®°** - éšæ‰‹è®°å½•

#### 2. **è®¿é—®æ§åˆ¶**
æ‰€æœ‰æ—¥è®°æ–‡ä»¶çš„ frontmatter é…ç½®ï¼š

```yaml
---
title: "æ—¥è®°æ ‡é¢˜"
published: 2024-11-23
category: "æ—¥è®°"
tags: ["æ—¥è®°", "éšç¬”"]
accessLevel: "members-only"  # ğŸ”‘ éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®
hideFromSearch: true          # ğŸ” ä»æœç´¢ç»“æœéšè—
lang: "zh_CN"
---
```

### ğŸ” éšç§ä¿æŠ¤

- âœ… **Git çº§åˆ«éš”ç¦»**ï¼šå†…å®¹ä¸åœ¨å…¬å…±ä»“åº“ä¸­
- âœ… **è®¿é—®çº§åˆ«æ§åˆ¶**ï¼š`accessLevel: "members-only"`
- âœ… **æœç´¢éšè—**ï¼š`hideFromSearch: true`
- âœ… **ç”¨æˆ·è®¤è¯**ï¼šå¿…é¡»ç™»å½•åæ‰èƒ½æŸ¥çœ‹

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### ä¸»ä»“åº“éƒ¨ç½²ï¼ˆCloudflare Pagesï¼‰

1. **å…‹éš†ä»“åº“ï¼ˆå«å­æ¨¡å—ï¼‰**ï¼š
   ```bash
   git clone --recurse-submodules git@github.com:johntime2005/blog.git
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
   - `ADMIN_PASSWORD` - ç®¡ç†å‘˜å¯†ç 
   - `GIT_SSH_KEY` - è®¿é—®ç§æœ‰å­æ¨¡å—çš„ SSH å¯†é’¥
   - `POST_ENCRYPTION` - KV å‘½åç©ºé—´ç»‘å®š

3. **æ„å»ºå‘½ä»¤**ï¼š
   ```bash
   git submodule update --init --recursive && pnpm install && pnpm build
   ```

### ç§æœ‰ä»“åº“æ›´æ–°

1. **ä¿®æ”¹æ—¥è®°å†…å®¹**ï¼š
   ```bash
   cd src/content/posts/diary
   vim 2025-12-05-æ—¥è®°.md
   ```

2. **æäº¤åˆ°ç§æœ‰ä»“åº“**ï¼š
   ```bash
   git add .
   git commit -m "æ›´æ–°æ—¥è®°"
   git push
   ```

3. **æ›´æ–°ä¸»ä»“åº“å¼•ç”¨**ï¼š
   ```bash
   cd /home/johntime/Desktop/blog
   git add src/content/posts/diary
   git commit -m "æ›´æ–°æ—¥è®°å¼•ç”¨"
   git push
   ```

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

### å…¬å…±ä»“åº“
- **å…¬å¼€æ–‡ç« **ï¼šçº¦ 20 ç¯‡ï¼ˆtutorials + wordpress-importï¼‰
- **æ¡†æ¶ä»£ç **ï¼šå®Œæ•´çš„ Astro åšå®¢æ¡†æ¶
- **ç”¨æˆ·è®¤è¯**ï¼šå®Œæ•´çš„è®¤è¯ç³»ç»Ÿ
- **é…ç½®æ–‡ä»¶**ï¼šç«™ç‚¹é…ç½®ã€ä¸»é¢˜é…ç½®ç­‰

### ç§æœ‰ä»“åº“
- **æ—¥è®°æ•°é‡**ï¼š75 ç¯‡
- **æ—¶é—´è·¨åº¦**ï¼š2023-2025
- **æ–‡ç« ç±»å‹**ï¼šæ—¥è®°ã€éšç¬”ã€æ¢¦è®°ã€æ€å½•ã€éšè®°

---

## ğŸ”‘ è®¿é—®æƒé™çŸ©é˜µ

| å†…å®¹ç±»å‹ | æ¸¸å®¢ | å·²ç™»å½•ç”¨æˆ· | ç®¡ç†å‘˜ |
|---------|------|-----------|--------|
| å…¬å¼€æ–‡ç« ï¼ˆtutorialsï¼‰ | âœ… | âœ… | âœ… |
| ç§æœ‰æ—¥è®°ï¼ˆdiaryï¼‰ | âŒ | âœ… | âœ… |
| ç®¡ç†åå° | âŒ | âŒ | âœ… |
| ç”¨æˆ·ç®¡ç† | âŒ | âŒ | âœ… |

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### Fork æœ¬é¡¹ç›®çš„ç”¨æˆ·

å½“å…¶ä»–äºº fork ä¸»ä»“åº“æ—¶ï¼š

- âœ… è·å¾—ï¼šåšå®¢æ¡†æ¶ä»£ç  + å…¬å¼€æ–‡ç«  + ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âŒ çœ‹ä¸åˆ°ï¼š`src/content/posts/diary/` ç›®å½•çš„å†…å®¹
- ğŸ’¡ å»ºè®®ï¼šåˆ›å»ºè‡ªå·±çš„ç§æœ‰ä»“åº“å­˜æ”¾ç§å¯†å†…å®¹

### æœ¬åœ°å¼€å‘è€…

- ç¡®ä¿æœ‰ç§æœ‰ä»“åº“çš„è®¿é—®æƒé™
- ä½¿ç”¨ `--recurse-submodules` å…‹éš†ä»“åº“
- å®šæœŸåŒæ­¥å­æ¨¡å—ï¼š`git submodule update --remote`

---

**ç»´æŠ¤è€…ï¼š** johntime
**æœ€åæ›´æ–°ï¼š** 2025-12-05
**ç›¸å…³æ–‡æ¡£ï¼š** [DEPLOYMENT.md](./DEPLOYMENT.md)
