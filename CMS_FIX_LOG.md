# CMS 404é”™è¯¯ä¿®å¤æ—¥å¿—

## é—®é¢˜è¯Šæ–­

### ç—‡çŠ¶
è®¿é—® `https://blog.johntime.top/admin` æ˜¾ç¤º 404 Not Found

### æ ¹æœ¬åŸå› 
1. **åˆ†æ”¯é…ç½®é”™è¯¯**: `public/admin/config.yml` ä¸­çš„ `branch` å­—æ®µè®¾ç½®ä¸º `master`ï¼Œä½†ä»“åº“å®é™…ä½¿ç”¨ `main` åˆ†æ”¯
2. **æ„å»ºè¾“å‡ºç¼ºå¤±**: adminæ–‡ä»¶æ²¡æœ‰è¢«åŒ…å«åœ¨ `dist/` è¾“å‡ºä¸­

### ä¿®å¤æ­¥éª¤

#### ç¬¬1æ­¥ï¼šä¿®å¤é…ç½®æ–‡ä»¶ âœ…
ä¿®æ”¹ `public/admin/config.yml` çš„åç«¯é…ç½®ï¼š

```yaml
# ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰
backend:
  name: github
  repo: johntime2005/blog
  branch: master    # âŒ é”™è¯¯çš„åˆ†æ”¯

# ä¹‹åï¼ˆæ­£ç¡®ï¼‰
backend:
  name: github
  repo: johntime2005/blog
  branch: main      # âœ… æ­£ç¡®çš„åˆ†æ”¯
```

#### ç¬¬2æ­¥ï¼šé‡æ–°æ„å»ºé¡¹ç›® âœ…
```bash
pnpm build
```

éªŒè¯è¾“å‡ºï¼š
```
âœ“ admin æ–‡ä»¶å·²åœ¨ dist/admin/ ä¸­ç”Ÿæˆ
```

#### ç¬¬3æ­¥ï¼šæäº¤ä¿®æ”¹ âœ…
```bash
git add public/admin/config.yml
git commit -m "fix: ä¿®å¤CMSé…ç½®ä¸­çš„åˆ†æ”¯å¼•ç”¨"
git push origin main
```

#### ç¬¬4æ­¥ï¼šé‡æ–°éƒ¨ç½²åˆ°Cloudflare âœ…
```bash
pnpm wrangler pages deploy dist --project-name=blog
```

éƒ¨ç½²ç»“æœï¼š
```
âœ¨ Deployment complete!
âœ¨ Deployment alias URL: https://main.blog-4qk.pages.dev
```

---

## éªŒè¯éƒ¨ç½²æˆåŠŸ

è®¿é—®ä»¥ä¸‹åœ°å€æµ‹è¯•ï¼š

### 1. åšå®¢å‰å°
```
https://blog.johntime.top
æˆ–
https://blog-4qk.pages.dev
```

### 2. CMSç®¡ç†åå°ï¼ˆç°å·²å¯ç”¨ï¼‰
```
https://blog.johntime.top/admin
æˆ–
https://blog-4qk.pages.dev/admin
```

### 3. ç™»å½•CMS
1. è®¿é—® `/admin` é¡µé¢
2. ç‚¹å‡» "Login with GitHub"
3. ä½¿ç”¨GitHubè´¦å·æˆæƒ
4. åº”è¯¥çœ‹åˆ°åšå®¢æ–‡ç« åˆ—è¡¨

---

## ä¿®å¤æ€»ç»“

| é¡¹ç›® | çŠ¶æ€ |
|------|------|
| é…ç½®é”™è¯¯ | âœ… å·²ä¿®å¤ |
| æ„å»ºè¾“å‡º | âœ… å·²éªŒè¯ |
| GitHubæäº¤ | âœ… å·²æ¨é€ |
| Cloudflareéƒ¨ç½² | âœ… å·²å®Œæˆ |
| CMSåå°è®¿é—® | âœ… ç°å·²å¯ç”¨ |

---

## åç»­æ­¥éª¤

ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. **è®¿é—®CMSåå°**
   ```
   https://blog.johntime.top/admin
   ```

2. **ä½¿ç”¨GitHubè´¦å·ç™»å½•**
   - ç‚¹å‡» "Login with GitHub"
   - æˆæƒåº”ç”¨

3. **åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« **
   - ç‚¹å‡» "æ–°å»ºæ–‡ç« "
   - å¡«å†™ä¿¡æ¯
   - ä¿å­˜å¹¶å‘å¸ƒ

---

## å…³é”®å­¦ä¹ ç‚¹

### 1. åˆ†æ”¯é…ç½®å¾ˆå…³é”®
CMSéœ€è¦æŒ‡å‘æ­£ç¡®çš„Gitåˆ†æ”¯ã€‚å¦‚æœåˆ†æ”¯ä¸åŒ¹é…ä¼šå¯¼è‡´CMSæ— æ³•è®¿é—®ä»“åº“ã€‚

### 2. é™æ€æ–‡ä»¶éœ€è¦åŒ…å«åœ¨æ„å»ºè¾“å‡ºä¸­
`public/admin/` ä¸­çš„æ–‡ä»¶å¿…é¡»è¢«å¤åˆ¶åˆ° `dist/` ç›®å½•ï¼Œæ‰èƒ½éƒ¨ç½²åˆ°Cloudflareã€‚

### 3. Astroè‡ªåŠ¨å¤„ç†publicæ–‡ä»¶å¤¹
Astroä¼šè‡ªåŠ¨å°† `public/` ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°æ„å»ºè¾“å‡ºï¼Œæ‰€ä»¥åªéœ€è¦åœ¨ `public/admin/` ä¸­æ”¾ç½®æ–‡ä»¶å³å¯ã€‚

---

## å¸¸è§é—®é¢˜

**Q: å¦‚æœCMSä»ç„¶æ— æ³•è®¿é—®æ€ä¹ˆåŠï¼Ÿ**
A: 
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
2. ç­‰å¾…1-2åˆ†é’Ÿè®©Cloudflareç¼“å­˜æ›´æ–°
3. å°è¯•è®¿é—® https://blog-4qk.pages.dev/admin
4. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯æ¶ˆæ¯

**Q: ç™»å½•åä»ç„¶æ˜¾ç¤ºé”™è¯¯æ€ä¹ˆåŠï¼Ÿ**
A:
1. ç¡®ä¿æ‚¨æ˜¯blogä»“åº“çš„owneræˆ–collaborator
2. æ£€æŸ¥GitHubè´¦å·æƒé™
3. å°è¯•åœ¨éšç§æµè§ˆæ¨¡å¼ä¸­è®¿é—®

**Q: å¦‚ä½•æ›´æ–°åˆ†æ”¯é…ç½®ï¼Ÿ**
A: åªéœ€ç¼–è¾‘ `public/admin/config.yml` çš„ `branch` å­—æ®µï¼Œç„¶åè¿è¡Œï¼š
```bash
pnpm build
pnpm wrangler pages deploy dist --project-name=blog
```

---

## æ—¶é—´è½´

- **13:20** - æ„å»ºé¡¹ç›®ï¼ŒéªŒè¯adminæ–‡ä»¶ç”Ÿæˆ
- **13:21** - ä¿®å¤config.ymlä¸­çš„åˆ†æ”¯å¼•ç”¨ï¼ˆmaster â†’ mainï¼‰
- **13:22** - æäº¤ä¿®æ”¹å¹¶æ¨é€åˆ°GitHub
- **13:23** - éƒ¨ç½²åˆ°Cloudflare Pages
- **13:24** - âœ… éƒ¨ç½²æˆåŠŸï¼

---

**ä¿®å¤å®Œæˆï¼æ‚¨çš„CMSåå°ç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚** ğŸ‰
